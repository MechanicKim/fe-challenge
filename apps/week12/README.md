# 12주차 챌린지 가이드: 클릭 아웃사이드(Click Outside) 훅/디렉티브

12주차 챌린지는 **드롭다운 메뉴, 툴팁, 모달** 등 특정 컴포넌트 외부를 사용자가 클릭했을 때, 해당 컴포넌트를 닫거나 숨기는 로직을 **재사용 가능한 유틸리티** 형태로 구현하는 것입니다. React 사용자라면 **훅(Hook)** 형태로, Vue 사용자라면 **커스텀 디렉티브(Directive)** 형태로 구현합니다.

### 🚀 챌린지 개요: 목표와 요구사항

| 카테고리 | 상세 목표 |
| :--- | :--- |
| **핵심 기능** | 지정된 DOM 요소 외부에서 발생하는 `click` 이벤트를 감지하고 콜백 함수를 실행해야 합니다. |
| **주요 기술** | **프레임워크의 훅/디렉티브 시스템**, DOM `ref` (참조), `document.addEventListener`, `Node.contains()`. |
| **재사용성** | 어떤 컴포넌트에도 **단 한 줄**의 코드 추가로 쉽게 적용될 수 있도록 설계되어야 합니다. |
| **클린업** | 컴포넌트가 언마운트(Unmount)될 때, **전역 이벤트 리스너를 반드시 제거**하여 메모리 누수(Memory Leak)를 방지해야 합니다. |

---

### ⚙️ 필수 구현 단계

#### 1. 환경 설정 및 컴포넌트 구조

1.  **테스트 컴포넌트:** 클릭 아웃사이드 로직을 테스트할 **드롭다운 메뉴** 형태의 간단한 컴포넌트를 구현합니다. (메뉴가 열렸을 때만 로직이 작동해야 합니다.)
2.  **참조(Ref) 설정:** 외부 클릭을 감지해야 할 **메뉴 컨테이너 DOM 요소**에 `ref` 또는 `template ref`를 설정하여 참조할 수 있도록 준비합니다.

#### 2. 유틸리티 로직 개발 (핵심)

선택한 프레임워크에 맞춰 다음 중 하나를 구현합니다.

##### 🅰️ React 환경: `useClickOutside` 훅 개발

1.  **훅 시그니처:** `useClickOutside(ref, callback)` 형태를 갖습니다.
2.  **DOM 리스너 등록:** `useEffect`를 사용하여 컴포넌트 마운트 시점에 `document`에 `mousedown` 또는 `click` 이벤트 리스너를 등록합니다.
3.  **클릭 검증:** 리스너 내부에서 이벤트가 발생했을 때, 다음 두 조건을 검증합니다.
    * `ref.current`가 존재하는가? (컴포넌트가 언마운트되지 않았는가?)
    * 이벤트가 발생한 대상(`.target`)이 `ref.current`의 **내부**에 포함되는가? (`ref.current.contains(event.target)`)
    * 만약 내부에 포함되지 않는다면, **콜백(`callback`) 함수를 실행**합니다.
4.  **클린업:** `useEffect`의 반환 함수를 사용하여 컴포넌트 언마운트 시 등록된 `document` 이벤트 리스너를 반드시 제거합니다.

##### 🅱️ Vue 환경: `v-click-outside` 커스텀 디렉티브 개발

1.  **디렉티브 등록:** `app.directive('click-outside', {...})`를 사용하여 디렉티브를 전역 등록합니다.
2.  **바인딩 및 리스너:** `mounted` 훅에서 디렉티브가 바인딩된 DOM 요소(`el`)를 사용하여, `document`에 이벤트 리스너를 등록합니다. `el`을 사용하여 해당 DOM 요소의 참조를 유지합니다.
3.  **검증 로직:** 리스너 내부에서 이벤트 대상이 `el`의 내부에 포함되지 않으면 (`!el.contains(event.target)`), 바인딩된 값(`binding.value`)인 **콜백 함수를 실행**합니다.
4.  **클린업:** `unmounted` 훅에서 등록된 `document` 이벤트 리스너를 반드시 제거합니다.

#### 3. 최종 적용 테스트

1.  개발된 훅 또는 디렉티브를 드롭다운 컴포넌트에 적용하여, 메뉴 외부를 클릭했을 때 드롭다운이 닫히는지 테스트합니다.

---

### 🌟 심화 도전 과제 (Challenge Up)

실력을 더 높이고 싶다면 다음 항목에 도전해 보세요.

1.  **이벤트 버블링 제어:** 모달이나 팝업처럼 중첩된 컴포넌트가 있을 때, 내부 컴포넌트의 클릭 아웃사이드 로직이 외부 컴포넌트에 영향을 주지 않도록 **이벤트 전파(Propagation)**를 효과적으로 막는 방법을 구현합니다.
2.  **이벤트 타입 지정:** `click` 이벤트뿐만 아니라 `mousedown` 또는 `touchstart` 등 **어떤 이벤트 타입**으로 외부 클릭을 감지할지 옵션으로 지정할 수 있도록 유틸리티를 확장합니다.
3.  **다중 참조 지원:** 하나의 훅/디렉티브가 **여러 개의 분리된 DOM 요소(ref)**를 인수로 받아, 그 모든 요소 외부를 클릭했을 때만 콜백을 실행하도록 기능을 확장합니다.
